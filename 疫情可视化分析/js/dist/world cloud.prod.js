"use strict";function worldcloud(){var s=700,l=400,a=100,o=12,n=0,r=100,i=[],e=1e3,f=-1;svg=d3.select("body").append("svg").attr("class","cirrusGraph").attr("width",s).attr("height",l);var u=svg.append("g").attr("transform","translate(".concat(s/2,",").concat(l/2,")")),c=d3.layoutCloud().size([s,l]).overflow(!0).padding(1).rotate(function(t){return 90*~~(2*Math.random())}).spiral("archimedean").font('"Palatino Linotype", "Book Antiqua", Palatino, serif').fontSize(function(t){return t.fontSize}).text(function(t){return t.text}).on("end",function(t,e){var n=e?Math.min(s/Math.abs(e[1].x-s/2),s/Math.abs(e[0].x-s/2),l/Math.abs(e[1].y-l/2),l/Math.abs(e[0].y-l/2))/2:1,r=d3.transition().duration(1e3),a=u.selectAll("text").data(t,function(t){return t.text});a.exit().transition(r).style("font-size","1px").remove();var o=d3.scaleOrdinal(d3.schemeCategory10),i=a.enter().append("text").text(function(t){return t.text}).attr("text-anchor","middle").attr("data-freq",function(t){return t.rawFreq}).attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).style("font-family",'"Palatino Linotype", "Book Antiqua", Palatino, serif"').style("fill",function(t){return o(t.text)}).style("font-size","1px");a.merge(i).transition(r).style("font-family",'"Palatino Linotype", "Book Antiqua", Palatino, serif"').style("fill",function(t){return o(t.text)}).attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).style("font-size",function(t){return t.fontSize+"px"}),u.transition(r).attr("transform","translate("+s/2+","+l/2+")scale("+n+")")});d3.scaleOrdinal(d3.schemeCategory20c);function d(){var t;t=d3.extent(i,function(t){return t.rawFreq}),e=t[0],f=t[1],n=f,r=e,function(){if(void 0!==i)for(var t=0;t<i.length;t++){var e=i[t];e.relativeSize=function(t,e,n,r,a){return r+(t-e)/(n-e)*(a-r)}(e.rawFreq,r,n,.1,1)}}(),function(){if(function(){if(void 0!==i){var t=s*l;o=t<1e5?8:12;i.length;for(var e=0,n=0;n<i.length;n++){var r=h(i[n]);e+=r}a=t/e}}(),void 0!==i)for(var t=0;t<i.length;t++){var e=i[t],n=function(t){var e=a,n=h(t)*e;return(Math.sqrt(6)*Math.sqrt(6*Math.pow(t.text.length,2)+n*t.text.length)-6*t.text.length)/(2*t.text.length)}(e);e.fontSize=o<n?n:o}}(),c.words(i).start()}function h(t){for(var e=Math.log(10*t.relativeSize)*Math.LOG10E,n=(e+t.relativeSize)/2,r=0,a=0;a<t.text.length;a++){var o=t.text.charAt(a);r+="f"==o||"i"==o||"j"==o||"l"==o||"r"==o||"t"==o?e/3:"m"==o||"w"==o?e/(4/3):e/1.9}return n*r}d3.json("css/terms2.json",function(t,e){i=e,d()}),setTimeout(function(){[{text:"revenues",rawFreq:117},{text:"statement",rawFreq:115},{text:"ra",rawFreq:113},{text:"01",rawFreq:109},{text:"annual",rawFreq:108}].forEach(function(t){i.push(t)}),d()},5e3)}worldcloud();